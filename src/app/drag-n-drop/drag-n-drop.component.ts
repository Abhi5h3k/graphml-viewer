import {
  Component,
  OnInit
} from '@angular/core';
import {
  ParticlesConfig
} from './particles-config';
import {
  DataServiceService
} from '../data-service.service'
import {
  MatSnackBar
} from '@angular/material/snack-bar';
declare let particlesJS: any;
@Component({
  selector: 'app-drag-n-drop',
  templateUrl: './drag-n-drop.component.html',
  styleUrls: ['./drag-n-drop.component.css']
})
export class DragNDropComponent implements OnInit {
  uploading = false;
  private i = 1;
  private keys_len = 0;
  opt = 1;
  constructor(private data: DataServiceService, private _snackBar: MatSnackBar) {}
  ngOnInit() {
    var style_list = ['animate__backInDown', 'animate__backInLeft', 'animate__backInRight', 'animate__backInUp', 'animate__bounceInDown', 'animate__fadeInDown', 'animate__fadeInUp']
    var style_class = style_list[Math.floor(Math.random() * style_list.length)];
    var ele = document.getElementById('dnd').classList.add(style_class);
    setTimeout(
      function () {
        document.getElementById('dnd').classList.remove(style_class);
      }, 1000);
    this.opt = Math.floor(Math.random() * 2) + 1;
    this.data.upload.subscribe(x => this.uploading = x);
    sessionStorage.clear();
    this.invokeParticles();
  }
  public invokeParticles(): void {
    particlesJS('particles-js', ParticlesConfig, function () {});
  }
  openSnackBar(message: string, action: string) {
    this._snackBar.open(message, action, {
      duration: 1000,
    });
  }
  file: any;
  fileChanged(evt) {
    this.data.update_uploading(true);
    this.openSnackBar("Working on GraphML", "!!");
    evt.preventDefault();
    evt.stopPropagation();
    var file_list = [];
    this.keys_len = Object.keys(evt.target.files).length;
    this.i = 1;
    for (let [key, value] of Object.entries(evt.target.files)) {
      file_list.push(value["name"]);
      this.uploadDocument(value);
    }
    this.data.set_files_uploaded(file_list);
  }
  reFormatCytoData(graphml_data){

    var parser = new DOMParser();
    var xmlDoc = parser.parseFromString(graphml_data,"text/xml");
    
    var graphml_key_map = {}
    Array.from(xmlDoc.getElementsByTagName("key")).forEach(element => {
      var val  = element.getAttribute("attr.name");
      graphml_key_map[element.getAttribute("id")] =element.getAttribute("attr.name");
      element.setAttribute("id",String(val));    
    });
    Array.from(xmlDoc.getElementsByTagName("data")).forEach(element => {
      // var val  = element.getAttribute("key");
      element.setAttribute("key",graphml_key_map[element.getAttribute("key")]);
      });
  
    return new XMLSerializer().serializeToString(xmlDoc.documentElement);
    }

  uploadDocument(file) {
    this.file = file;
    let fileReader = new FileReader();
    fileReader.readAsText(this.file);
    fileReader.onload = (e) => {
      sessionStorage.setItem(file.name,this.reFormatCytoData(fileReader.result as string));
      if (this.i == this.keys_len) {
        this.data.update_uploading(false);
        this.data.update_show_graph_screen(true);
      }
      this.i = this.i + 1;
    }
  }
  downloadSampleGraphml() {
    var filename = 'mahabharat_family_tree_abhi.graphml';
    // https://www.freeformatter.com/json-escape.html
    var text = "<?xml version='1.0' encoding='utf-8'?>\r\n<graphml xmlns=\"http:\/\/graphml.graphdrawing.org\/xmlns\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:schemaLocation=\"http:\/\/graphml.graphdrawing.org\/xmlns http:\/\/graphml.graphdrawing.org\/xmlns\/1.0\/graphml.xsd\">\r\n  <key id=\"relation\" for=\"edge\" attr.name=\"relation\" attr.type=\"string\" \/>\r\n  <key id=\"gender\" for=\"node\" attr.name=\"gender\" attr.type=\"string\" \/>\r\n  <key id=\"node_shape\" for=\"node\" attr.name=\"node_shape\" attr.type=\"string\" \/>\r\n  <key id=\"name\" for=\"node\" attr.name=\"name\" attr.type=\"string\" \/>\r\n  <key id=\"image\" for=\"node\" attr.name=\"image\" attr.type=\"string\" \/>\r\n  <key id=\"id\" for=\"node\" attr.name=\"id\" attr.type=\"string\" \/>\r\n  <graph edgedefault=\"directed\">\r\n    <node id=\"janamejaya\">\r\n      <data key=\"id\">janamejaya<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">janamejaya<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Madravti\">\r\n      <data key=\"id\">Madravti<\/data>\r\n\t  <data key=\"image\">assets\/female.jpg<\/data>\r\n      <data key=\"name\">Madravti<\/data>\r\n      <data key=\"gender\">Female<\/data>\r\n\t  <data key=\"node_shape\">rectangle<\/data>\r\n    <\/node>\r\n    <node id=\"Parikshita\">\r\n      <data key=\"id\">Parikshita<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Parikshita<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Abhimanyu\">\r\n      <data key=\"id\">Abhimanyu<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Abhimanyu<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Uttara\">\r\n      <data key=\"id\">Uttara<\/data>\r\n\t  <data key=\"image\">assets\/female.jpg<\/data>\r\n      <data key=\"name\">Uttara<\/data>\r\n      <data key=\"gender\">Female<\/data>\r\n\t  <data key=\"node_shape\">rectangle<\/data>\r\n    <\/node>\r\n    <node id=\"Arjuna\">\r\n      <data key=\"id\">Arjuna<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Arjuna<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Subhadra\">\r\n      <data key=\"id\">Subhadra<\/data>\r\n\t  <data key=\"image\">assets\/female.jpg<\/data>\r\n      <data key=\"name\">Subhadra<\/data>\r\n      <data key=\"gender\">Female<\/data>\r\n\t  <data key=\"node_shape\">rectangle<\/data>\r\n    <\/node>\r\n    <node id=\"Prativindhya\">\r\n      <data key=\"id\">Prativindhya<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Prativindhya<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Draupadi\">\r\n      <data key=\"id\">Draupadi<\/data>\r\n\t  <data key=\"image\">assets\/female.jpg<\/data>\r\n      <data key=\"name\">Draupadi<\/data>\r\n      <data key=\"gender\">Female<\/data>\r\n\t  <data key=\"node_shape\">rectangle<\/data>\r\n    <\/node>\r\n    <node id=\"Yudhishthira\">\r\n      <data key=\"id\">Yudhishthira<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Yudhishthira<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Sutasoma\">\r\n      <data key=\"id\">Sutasoma<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Sutasoma<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Bheema\">\r\n      <data key=\"id\">Bheema<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Bheema<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Shrutakarma\">\r\n      <data key=\"id\">Shrutakarma<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Shrutakarma<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Satanika\">\r\n      <data key=\"id\">Satanika<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Satanika<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Nakula\">\r\n      <data key=\"id\">Nakula<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Nakula<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Shrutasena\">\r\n      <data key=\"id\">Shrutasena<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Shrutasena<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Sahadeva\">\r\n      <data key=\"id\">Sahadeva<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Sahadeva<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"kunti\">\r\n      <data key=\"id\">kunti<\/data>\r\n\t  <data key=\"image\">assets\/female.jpg<\/data>\r\n      <data key=\"name\">kunti<\/data>\r\n      <data key=\"gender\">Female<\/data>\r\n\t  <data key=\"node_shape\">rectangle<\/data>\r\n    <\/node>\r\n    <node id=\"Pandu\">\r\n      <data key=\"id\">Pandu<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Pandu<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Madri\">\r\n      <data key=\"id\">Madri<\/data>\r\n\t  <data key=\"image\">assets\/female.jpg<\/data>\r\n      <data key=\"name\">Madri<\/data>\r\n      <data key=\"gender\">Female<\/data>\r\n\t  <data key=\"node_shape\">rectangle<\/data>\r\n    <\/node>\r\n    <node id=\"100_Kauravas\">\r\n      <data key=\"id\">100_Kauravas<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">100 Kauravas<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Gandhari\">\r\n      <data key=\"id\">Gandhari<\/data>\r\n\t  <data key=\"image\">assets\/female.jpg<\/data>\r\n      <data key=\"name\">Gandhari<\/data>\r\n      <data key=\"gender\">Female<\/data>\r\n\t  <data key=\"node_shape\">rectangle<\/data>\r\n    <\/node>\r\n    <node id=\"Yuyutsu\">\r\n      <data key=\"id\">Yuyutsu<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Yuyutsu<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Sughada_Maid_of_Gandhari\">\r\n      <data key=\"id\">Sughada_Maid_of_Gandhari<\/data>\r\n\t  <data key=\"image\">assets\/female.jpg<\/data>\r\n      <data key=\"name\">Sughada (Maid of Gandhari)<\/data>\r\n      <data key=\"gender\">Female<\/data>\r\n\t  <data key=\"node_shape\">rectangle<\/data>\r\n    <\/node>\r\n    <node id=\"Dhritarashtra\">\r\n      <data key=\"id\">Dhritarashtra<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Dhritarashtra<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Ambika\">\r\n      <data key=\"id\">Ambika<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Ambika<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Vyasa\">\r\n      <data key=\"id\">Vyasa<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Vyasa<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Ambalika\">\r\n      <data key=\"id\">Ambalika<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Ambalika<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Vichitravirya\">\r\n      <data key=\"id\">Vichitravirya<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Vichitravirya<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Shantanu\">\r\n      <data key=\"id\">Shantanu<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Shantanu<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Satyavati\">\r\n      <data key=\"id\">Satyavati<\/data>\r\n\t  <data key=\"image\">assets\/female.jpg<\/data>\r\n      <data key=\"name\">Satyavati<\/data>\r\n      <data key=\"gender\">Female<\/data>\r\n\t  <data key=\"node_shape\">rectangle<\/data>\r\n    <\/node>\r\n    <node id=\"Bhisma\">\r\n      <data key=\"id\">Bhisma<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Bhisma<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Ganga\">\r\n      <data key=\"id\">Ganga<\/data>\r\n\t  <data key=\"image\">assets\/female.jpg<\/data>\r\n      <data key=\"name\">Ganga<\/data>\r\n      <data key=\"gender\">Female<\/data>\r\n\t  <data key=\"node_shape\">rectangle<\/data>\r\n    <\/node>\r\n    <node id=\"Parashara\">\r\n      <data key=\"id\">Parashara<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Parashara<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <node id=\"Kuru\">\r\n      <data key=\"id\">Kuru<\/data>\r\n\t  <data key=\"image\">assets\/male.png<\/data>\r\n      <data key=\"name\">Kuru<\/data>\r\n      <data key=\"gender\">Male<\/data>\r\n\t  <data key=\"node_shape\">triangle<\/data>\r\n    <\/node>\r\n    <edge source=\"janamejaya\" target=\"Madravti\" id=\"janamejayaMadravti0\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"janamejaya\" target=\"Parikshita\" id=\"janamejayaParikshita1\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Madravti\" target=\"Parikshita\" id=\"MadravtiParikshita2\">\r\n      <data key=\"relation\">wife_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Parikshita\" target=\"Madravti\" id=\"ParikshitaMadravti3\">\r\n      <data key=\"relation\">husband_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Parikshita\" target=\"Abhimanyu\" id=\"ParikshitaAbhimanyu4\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Parikshita\" target=\"Uttara\" id=\"ParikshitaUttara5\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Abhimanyu\" target=\"Uttara\" id=\"AbhimanyuUttara6\">\r\n      <data key=\"relation\">husband_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Abhimanyu\" target=\"Arjuna\" id=\"AbhimanyuArjuna8\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Abhimanyu\" target=\"Subhadra\" id=\"AbhimanyuSubhadra9\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Uttara\" target=\"Abhimanyu\" id=\"UttaraAbhimanyu7\">\r\n      <data key=\"relation\">wife_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Arjuna\" target=\"Subhadra\" id=\"ArjunaSubhadra10\">\r\n      <data key=\"relation\">husband_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Arjuna\" target=\"Draupadi\" id=\"ArjunaDraupadi29\">\r\n      <data key=\"relation\">husband_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Arjuna\" target=\"kunti\" id=\"Arjunakunti36\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Arjuna\" target=\"Pandu\" id=\"ArjunaPandu37\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Subhadra\" target=\"Arjuna\" id=\"SubhadraArjuna11\">\r\n      <data key=\"relation\">wife_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Prativindhya\" target=\"Draupadi\" id=\"PrativindhyaDraupadi12\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Prativindhya\" target=\"Yudhishthira\" id=\"PrativindhyaYudhishthira13\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Draupadi\" target=\"Yudhishthira\" id=\"DraupadiYudhishthira22\">\r\n      <data key=\"relation\">wife_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Draupadi\" target=\"Bheema\" id=\"DraupadiBheema23\">\r\n      <data key=\"relation\">wife_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Draupadi\" target=\"Arjuna\" id=\"DraupadiArjuna24\">\r\n      <data key=\"relation\">wife_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Draupadi\" target=\"Nakula\" id=\"DraupadiNakula25\">\r\n      <data key=\"relation\">wife_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Draupadi\" target=\"Sahadeva\" id=\"DraupadiSahadeva26\">\r\n      <data key=\"relation\">wife_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Yudhishthira\" target=\"Draupadi\" id=\"YudhishthiraDraupadi27\">\r\n      <data key=\"relation\">husband_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Yudhishthira\" target=\"kunti\" id=\"Yudhishthirakunti32\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Yudhishthira\" target=\"Pandu\" id=\"YudhishthiraPandu33\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Sutasoma\" target=\"Draupadi\" id=\"SutasomaDraupadi14\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Sutasoma\" target=\"Bheema\" id=\"SutasomaBheema15\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Bheema\" target=\"Draupadi\" id=\"BheemaDraupadi28\">\r\n      <data key=\"relation\">husband_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Bheema\" target=\"kunti\" id=\"Bheemakunti34\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Bheema\" target=\"Pandu\" id=\"BheemaPandu35\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Shrutakarma\" target=\"Draupadi\" id=\"ShrutakarmaDraupadi16\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Shrutakarma\" target=\"Arjuna\" id=\"ShrutakarmaArjuna17\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Satanika\" target=\"Draupadi\" id=\"SatanikaDraupadi18\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Satanika\" target=\"Nakula\" id=\"SatanikaNakula19\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Nakula\" target=\"Draupadi\" id=\"NakulaDraupadi30\">\r\n      <data key=\"relation\">husband_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Nakula\" target=\"Madri\" id=\"NakulaMadri38\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Nakula\" target=\"Pandu\" id=\"NakulaPandu39\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Shrutasena\" target=\"Draupadi\" id=\"ShrutasenaDraupadi20\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Shrutasena\" target=\"Sahadeva\" id=\"ShrutasenaSahadeva21\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Sahadeva\" target=\"Draupadi\" id=\"SahadevaDraupadi31\">\r\n      <data key=\"relation\">husband_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Sahadeva\" target=\"Madri\" id=\"SahadevaMadri40\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Sahadeva\" target=\"Pandu\" id=\"SahadevaPandu41\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"kunti\" target=\"Pandu\" id=\"kuntiPandu42\">\r\n      <data key=\"relation\">wife_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Pandu\" target=\"kunti\" id=\"Pandukunti43\">\r\n      <data key=\"relation\">husband_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Pandu\" target=\"Madri\" id=\"PanduMadri45\">\r\n      <data key=\"relation\">husband_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Pandu\" target=\"Ambalika\" id=\"PanduAmbalika53\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Pandu\" target=\"Vyasa\" id=\"PanduVyasa54\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Pandu\" target=\"Vichitravirya\" id=\"PanduVichitravirya55\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Madri\" target=\"Pandu\" id=\"MadriPandu44\">\r\n      <data key=\"relation\">wife_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"100_Kauravas\" target=\"Gandhari\" id=\"100 KauravasGandhari46\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Gandhari\" target=\"Dhritarashtra\" id=\"GandhariDhritarashtra48\">\r\n      <data key=\"relation\">wife_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Yuyutsu\" target=\"Sughada_Maid_of_Gandhari\" id=\"YuyutsuSughada (Maid of Gandhari)47\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Sughada_Maid_of_Gandhari\" target=\"Dhritarashtra\" id=\"Sughada (Maid of Gandhari)Dhritarashtra50\">\r\n      <data key=\"relation\">vaishya_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Dhritarashtra\" target=\"Gandhari\" id=\"DhritarashtraGandhari49\">\r\n      <data key=\"relation\">husband_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Dhritarashtra\" target=\"Ambika\" id=\"DhritarashtraAmbika51\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Dhritarashtra\" target=\"Vyasa\" id=\"DhritarashtraVyasa52\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Dhritarashtra\" target=\"Vichitravirya\" id=\"DhritarashtraVichitravirya56\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Ambika\" target=\"Vichitravirya\" id=\"AmbikaVichitravirya57\">\r\n      <data key=\"relation\">wife_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Vyasa\" target=\"Parashara\" id=\"VyasaParashara67\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Vyasa\" target=\"Shantanu\" id=\"VyasaShantanu68\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Ambalika\" target=\"Vichitravirya\" id=\"AmbalikaVichitravirya58\">\r\n      <data key=\"relation\">wife_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Vichitravirya\" target=\"Ambika\" id=\"VichitraviryaAmbika59\">\r\n      <data key=\"relation\">husband_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Vichitravirya\" target=\"Ambalika\" id=\"VichitraviryaAmbalika60\">\r\n      <data key=\"relation\">husband_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Vichitravirya\" target=\"Shantanu\" id=\"VichitraviryaShantanu61\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Vichitravirya\" target=\"Satyavati\" id=\"VichitraviryaSatyavati62\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Shantanu\" target=\"Satyavati\" id=\"ShantanuSatyavati63\">\r\n      <data key=\"relation\">husband_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Shantanu\" target=\"Kuru\" id=\"ShantanuKuru70\">\r\n      <data key=\"relation\">related_to<\/data>\r\n    <\/edge>\r\n    <edge source=\"Satyavati\" target=\"Shantanu\" id=\"SatyavatiShantanu64\">\r\n      <data key=\"relation\">wife_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Satyavati\" target=\"Kuru\" id=\"SatyavatiKuru71\">\r\n      <data key=\"relation\">related_to<\/data>\r\n    <\/edge>\r\n    <edge source=\"Bhisma\" target=\"Shantanu\" id=\"BhismaShantanu65\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Bhisma\" target=\"Ganga\" id=\"BhismaGanga66\">\r\n      <data key=\"relation\">son_of<\/data>\r\n    <\/edge>\r\n    <edge source=\"Ganga\" target=\"Kuru\" id=\"GangaKuru69\">\r\n      <data key=\"relation\">related_to<\/data>\r\n    <\/edge>\r\n    <edge source=\"Parashara\" target=\"Kuru\" id=\"ParasharaKuru72\">\r\n      <data key=\"relation\">related_to<\/data>\r\n    <\/edge>\r\n  <\/graph>\r\n<\/graphml>\r\n";
    var element = document.createElement('a');
    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
    element.setAttribute('download', filename);
    element.style.display = 'none';
    document.body.appendChild(element);
    element.click();
    document.body.removeChild(element);
  }
}
